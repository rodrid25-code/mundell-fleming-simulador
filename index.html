<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mundell-Fleming Interactivo</title>
    <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
    <style>
        body { font-family: Arial, sans-serif; margin: 20px; }
        .chart-container { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .controls { margin-bottom: 20px; }
        .controls select, .controls button { margin-right: 10px; padding: 5px; }
    </style>
</head>
<body>
    <h1>Modelo Mundell-Fleming Interactivo</h1>
    <div class="controls">
        <label for="shock">Selecciona un shock:</label>
        <select id="shock">
            <option value="fiscal">Política Fiscal Expansiva</option>
            <option value="monetaria">Política Monetaria Expansiva</option>
            <option value="externo">Shock Externo</option>
        </select>
        <label for="cambio">Régimen cambiario:</label>
        <select id="cambio">
            <option value="fijo">Tipo de cambio fijo</option>
            <option value="flexible">Tipo de cambio flexible</option>
        </select>
        <button onclick="aplicarShock()">Aplicar Shock</button>
    </div>

    <div class="chart-container">
        <div id="mercado-monetario"></div>
        <div id="mercado-bienes"></div>
        <div id="mercado-divisas"></div>
        <div id="mercado-agregado"></div>
    </div>

    <script>
        // Función para crear las gráficas iniciales
        function crearGraficas() {
            // Mercado Monetario
            Plotly.newPlot('mercado-monetario', [
                { x: [1, 5], y: [5, 1], mode: 'lines', name: 'MD/P', line: {color: 'red'} },
                { x: [3, 3], y: [0, 6], mode: 'lines', name: 'MS/P', line: {color: 'blue'} }
            ], { title: 'Mercado Monetario (M/P vs i)', xaxis: {title: 'M/P'}, yaxis: {title: 'i'} });

            // Mercado de Bienes y Dinero
            Plotly.newPlot('mercado-bienes', [
                { x: [1, 5], y: [5, 1], mode: 'lines', name: 'IS', line: {color: 'red'} },
                { x: [1, 5], y: [1, 5], mode: 'lines', name: 'LM', line: {color: 'blue'} }
            ], { title: 'IS-LM', xaxis: {title: 'Q'}, yaxis: {title: 'i'} });

            // Mercado de Divisas
            Plotly.newPlot('mercado-divisas', [
                { x: [1, 5], y: [1, 5], mode: 'lines', name: 'Oferta', line: {color: 'blue'} },
                { x: [1, 5], y: [5, 1], mode: 'lines', name: 'Demanda', line: {color: 'red'} }
            ], { title: 'Mercado de Divisas (ME vs TCN)', xaxis: {title: 'ME'}, yaxis: {title: 'TCN'} });

            // Mercado Agregado
            Plotly.newPlot('mercado-agregado', [
                { x: [1, 5], y: [5, 1], mode: 'lines', name: 'DA', line: {color: 'red'} },
                { x: [1, 5], y: [3, 3], mode: 'lines', name: 'OA', line: {color: 'blue'} }
            ], { title: 'Mercado Agregado (Q vs P)', xaxis: {title: 'Q'}, yaxis: {title: 'P'} });
        }

        // Función para aplicar shocks
        function aplicarShock() {
            const shock = document.getElementById('shock').value;
            const cambio = document.getElementById('cambio').value;

            if (shock === 'fiscal') {
                // Mover IS a la derecha
                Plotly.restyle('mercado-bienes', { x: [[2, 6]], y: [[5, 1]] }, [0]);
            } else if (shock === 'monetaria') {
                // Mover LM hacia abajo
                Plotly.restyle('mercado-bienes', { x: [[1, 5]], y: [[0.5, 4.5]] }, [1]);
                // Aumentar MS en mercado monetario
                Plotly.restyle('mercado-monetario', { x: [[4, 4]] }, [1]);
            } else if (shock === 'externo') {
                // Ajustar mercado de divisas
                Plotly.restyle('mercado-divisas', { y: [[6, 2]] }, [1]);
            }

            alert(`Shock aplicado: ${shock} con régimen ${cambio}`);
        }

        crearGraficas();
    </script>
</body>
</html>
